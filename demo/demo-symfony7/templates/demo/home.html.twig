{% extends 'base.html.twig' %}

{% block title %}Home - Login Throttle Demo{% endblock %}

{% block body %}
    <h1>{{ title }}</h1>
    
    <div class="info-box">
        <p>{{ message|raw }}</p>
        
        <h3>Features:</h3>
        <ul>
            {% for feature in features %}
                <li>{{ feature|raw }}</li>
            {% endfor %}
        </ul>
    </div>

    <div class="info-box">
        <h3>ðŸ”’ Multiple Firewalls Configuration</h3>
        <p>This demo showcases <strong>3 different firewalls</strong> with independent throttling settings:</p>
        
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-top: 20px;">
            {% for firewall in firewalls %}
                <div style="border: 2px solid #007bff; border-radius: 8px; padding: 15px; background: #f8f9fa;">
                    <h4 style="margin-top: 0; color: #007bff;">{{ firewall.name }} Firewall</h4>
                    <p><strong>Path:</strong> <a href="{{ firewall.path }}">{{ firewall.path }}</a></p>
                    <p><strong>Max Attempts:</strong> <span class="badge badge-primary">{{ firewall.max_attempts }}</span></p>
                    <p><strong>Timeout:</strong> <span class="badge badge-info">{{ firewall.timeout }}</span></p>
                    <p><strong>Storage:</strong> <span class="badge badge-success">{{ firewall.storage }}</span></p>
                    <a href="{{ firewall.path }}" class="btn" style="margin-top: 10px; display: inline-block;">Test {{ firewall.name }} Login</a>
                </div>
            {% endfor %}
        </div>
    </div>

    <div class="info-box">
        <h3>ðŸ§ª How to Test Multiple Firewalls</h3>
        <ol>
            <li><strong>Main Firewall</strong> (<a href="{{ path('login') }}">/login</a>): Try 3 wrong attempts â†’ blocked for 10 minutes</li>
            <li><strong>API Firewall</strong> (<a href="{{ path('api_login_page') }}">/api/login-page</a>): Try 5 wrong attempts â†’ blocked for 5 minutes (more lenient)</li>
            <li><strong>Admin Firewall</strong> (<a href="{{ path('admin_login') }}">/admin/login</a>): Try 3 wrong attempts â†’ blocked for 30 minutes (very strict)</li>
        </ol>
        <p style="margin-top: 15px;"><strong>ðŸ’¡ Note:</strong> Each firewall has independent throttling. Being blocked in one firewall doesn't affect the others!</p>
    </div>

    <div class="info-box">
        <h3>ðŸ“Š Configuration Comparison</h3>
        <table style="width: 100%; border-collapse: collapse;">
            <thead>
                <tr style="background: #007bff; color: white;">
                    <th style="padding: 10px; text-align: left;">Firewall</th>
                    <th style="padding: 10px; text-align: left;">Max Attempts</th>
                    <th style="padding: 10px; text-align: left;">Timeout</th>
                    <th style="padding: 10px; text-align: left;">Storage</th>
                    <th style="padding: 10px; text-align: left;">Use Case</th>
                </tr>
            </thead>
            <tbody>
                {% for firewall in firewalls %}
                    <tr style="border-bottom: 1px solid #dee2e6;">
                        <td style="padding: 10px;"><strong>{{ firewall.name }}</strong></td>
                        <td style="padding: 10px;">{{ firewall.max_attempts }}</td>
                        <td style="padding: 10px;">{{ firewall.timeout }}</td>
                        <td style="padding: 10px;">{{ firewall.storage }}</td>
                        <td style="padding: 10px;">
                            {% if firewall.name == 'Main' %}
                                Standard web login
                            {% elseif firewall.name == 'API' %}
                                API authentication (more lenient)
                            {% else %}
                                Admin panel (very strict)
                            {% endif %}
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
{% endblock %}

